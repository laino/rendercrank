/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["RenderCrank"] = factory();
	else
		root["RenderCrank"] = factory();
})(self, function() {
return /******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./lib/commands/index.ts":
/*!*******************************!*\
  !*** ./lib/commands/index.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RunProgram\": () => (/* reexport safe */ _run_program__WEBPACK_IMPORTED_MODULE_0__.RunProgram)\n/* harmony export */ });\n/* harmony import */ var _run_program__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./run-program */ \"./lib/commands/run-program.ts\");\n\n\n\n//# sourceURL=webpack://RenderCrank/./lib/commands/index.ts?");

/***/ }),

/***/ "./lib/commands/run-program.ts":
/*!*************************************!*\
  !*** ./lib/commands/run-program.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RunProgram\": () => (/* binding */ RunProgram)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./lib/core/index.ts\");\n/* harmony import */ var _resources__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../resources */ \"./lib/resources/index.ts\");\nvar __read = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\n\n\nvar RunProgram = (0,_core__WEBPACK_IMPORTED_MODULE_0__.Command)({\n    name: 'RunProgram',\n    submit: function (instructor, protocol, options) {\n        var program = options.program, buffer = options.buffer, offset = options.offset, length = options.length;\n        instructor.loadResource(program);\n        instructor.loadResource(buffer);\n        protocol.writeUInt32Array([program.id, buffer.id, offset, length]);\n    },\n    render: function (protocol, renderer) {\n        var _a = __read(protocol.readUInt32Array(4), 4), programId = _a[0], bufferId = _a[1], offset = _a[2], length = _a[3];\n        var program = renderer.getResource(programId, _resources__WEBPACK_IMPORTED_MODULE_1__.Program);\n        var buffer = renderer.getResource(bufferId, _resources__WEBPACK_IMPORTED_MODULE_1__.Buffer);\n        console.log(program, buffer);\n        if (!program || !buffer) {\n            return;\n        }\n    }\n});\n\n\n//# sourceURL=webpack://RenderCrank/./lib/commands/run-program.ts?");

/***/ }),

/***/ "./lib/component.ts":
/*!**************************!*\
  !*** ./lib/component.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Component\": () => (/* binding */ Component)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./core */ \"./lib/core/index.ts\");\n/* harmony import */ var _render_target__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./render-target */ \"./lib/render-target.ts\");\n/* harmony import */ var _render_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./render-context */ \"./lib/render-context.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (undefined && undefined.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\n\n\nvar Component = /** @class */ (function (_super) {\n    __extends(Component, _super);\n    function Component(fn) {\n        var _this = _super.call(this) || this;\n        _this.fn = fn;\n        _this.resources = new Set();\n        _this.renderTarget = new _render_target__WEBPACK_IMPORTED_MODULE_1__.RenderTarget(_this);\n        return _this;\n    }\n    Component.prototype.render = function (protocol) {\n        var e_1, _a;\n        this.fn(this.renderTarget);\n        var instructor = new _core__WEBPACK_IMPORTED_MODULE_0__.Instructor(protocol);\n        this.renderTarget.submit(instructor);\n        try {\n            for (var _b = __values(instructor.resources), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var resource = _c.value;\n                resource.refcount++;\n                this.resources.add(resource);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        instructor.finish();\n    };\n    Component.prototype.unload = function (protocol) {\n        var e_2, _a;\n        var instructor = new _core__WEBPACK_IMPORTED_MODULE_0__.Instructor(protocol);\n        try {\n            for (var _b = __values(this.resources), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var resource = _c.value;\n                resource.refcount--;\n                instructor.unloadResource(resource);\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        instructor.finish();\n    };\n    return Component;\n}(_render_context__WEBPACK_IMPORTED_MODULE_2__.RenderContext));\n\n\n\n//# sourceURL=webpack://RenderCrank/./lib/component.ts?");

/***/ }),

/***/ "./lib/core/command.ts":
/*!*****************************!*\
  !*** ./lib/core/command.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"COMMAND_MAP\": () => (/* binding */ COMMAND_MAP),\n/* harmony export */   \"Command\": () => (/* binding */ Command)\n/* harmony export */ });\nvar COMMAND_MAP = {};\nfunction Command(def) {\n    if (Object.prototype.hasOwnProperty.call(COMMAND_MAP, def.name)) {\n        throw new Error(\"A command with the name \" + def.name + \" is already registered.\");\n    }\n    COMMAND_MAP[def.name] = def;\n    return def;\n}\n\n\n//# sourceURL=webpack://RenderCrank/./lib/core/command.ts?");

/***/ }),

/***/ "./lib/core/index.ts":
/*!***************************!*\
  !*** ./lib/core/index.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CanvasRenderer\": () => (/* reexport safe */ _renderer__WEBPACK_IMPORTED_MODULE_0__.CanvasRenderer),\n/* harmony export */   \"RESOURCE_MAP\": () => (/* reexport safe */ _resource__WEBPACK_IMPORTED_MODULE_1__.RESOURCE_MAP),\n/* harmony export */   \"Resource\": () => (/* reexport safe */ _resource__WEBPACK_IMPORTED_MODULE_1__.Resource),\n/* harmony export */   \"ResourceID\": () => (/* reexport safe */ _resource__WEBPACK_IMPORTED_MODULE_1__.ResourceID),\n/* harmony export */   \"ResourceRef\": () => (/* reexport safe */ _resource__WEBPACK_IMPORTED_MODULE_1__.ResourceRef),\n/* harmony export */   \"ResourceState\": () => (/* reexport safe */ _resource__WEBPACK_IMPORTED_MODULE_1__.ResourceState),\n/* harmony export */   \"registerResourceType\": () => (/* reexport safe */ _resource__WEBPACK_IMPORTED_MODULE_1__.registerResourceType),\n/* harmony export */   \"COMMAND_MAP\": () => (/* reexport safe */ _command__WEBPACK_IMPORTED_MODULE_2__.COMMAND_MAP),\n/* harmony export */   \"Command\": () => (/* reexport safe */ _command__WEBPACK_IMPORTED_MODULE_2__.Command),\n/* harmony export */   \"ArrayBufferProtocolReader\": () => (/* reexport safe */ _protocol__WEBPACK_IMPORTED_MODULE_3__.ArrayBufferProtocolReader),\n/* harmony export */   \"ArrayBufferProtocolWriter\": () => (/* reexport safe */ _protocol__WEBPACK_IMPORTED_MODULE_3__.ArrayBufferProtocolWriter),\n/* harmony export */   \"ProtocolReader\": () => (/* reexport safe */ _protocol__WEBPACK_IMPORTED_MODULE_3__.ProtocolReader),\n/* harmony export */   \"ProtocolWriter\": () => (/* reexport safe */ _protocol__WEBPACK_IMPORTED_MODULE_3__.ProtocolWriter),\n/* harmony export */   \"Instruction\": () => (/* reexport safe */ _instructor__WEBPACK_IMPORTED_MODULE_4__.Instruction),\n/* harmony export */   \"Instructor\": () => (/* reexport safe */ _instructor__WEBPACK_IMPORTED_MODULE_4__.Instructor)\n/* harmony export */ });\n/* harmony import */ var _renderer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./renderer */ \"./lib/core/renderer.ts\");\n/* harmony import */ var _resource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./resource */ \"./lib/core/resource.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./command */ \"./lib/core/command.ts\");\n/* harmony import */ var _protocol__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./protocol */ \"./lib/core/protocol.ts\");\n/* harmony import */ var _instructor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./instructor */ \"./lib/core/instructor.ts\");\n\n\n\n\n\n\n\n//# sourceURL=webpack://RenderCrank/./lib/core/index.ts?");

/***/ }),

/***/ "./lib/core/instructor.ts":
/*!********************************!*\
  !*** ./lib/core/instructor.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Instruction\": () => (/* binding */ Instruction),\n/* harmony export */   \"Instructor\": () => (/* binding */ Instructor)\n/* harmony export */ });\n/* harmony import */ var _resource__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./resource */ \"./lib/core/resource.ts\");\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./command */ \"./lib/core/command.ts\");\nvar __values = (undefined && undefined.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (undefined && undefined.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\n\n\nvar Instruction;\n(function (Instruction) {\n    Instruction[Instruction[\"STOP\"] = 0] = \"STOP\";\n    Instruction[Instruction[\"RUN_COMMAND\"] = 1] = \"RUN_COMMAND\";\n    Instruction[Instruction[\"MAP_COMMAND\"] = 2] = \"MAP_COMMAND\";\n    Instruction[Instruction[\"UPDATE_RESOURCE\"] = 3] = \"UPDATE_RESOURCE\";\n    Instruction[Instruction[\"LOAD_RESOURCE\"] = 4] = \"LOAD_RESOURCE\";\n    Instruction[Instruction[\"UNLOAD_RESOURCE\"] = 5] = \"UNLOAD_RESOURCE\";\n    Instruction[Instruction[\"ADVANCE\"] = 6] = \"ADVANCE\";\n})(Instruction || (Instruction = {}));\nvar Instructor = /** @class */ (function () {\n    function Instructor(protocol) {\n        var e_1, _a;\n        this.protocol = protocol;\n        this.mappedCommands = {};\n        this.resources = new Set();\n        var index = 0;\n        try {\n            for (var _b = __values(Object.values(_command__WEBPACK_IMPORTED_MODULE_1__.COMMAND_MAP)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var command = _c.value;\n                protocol.writeUInt8(Instruction.MAP_COMMAND);\n                protocol.writeUInt8(index);\n                protocol.writeString(command.name);\n                this.mappedCommands[command.name] = index;\n                index++;\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        this.commandProtocol = protocol.createWriter();\n    }\n    Instructor.prototype.command = function (command) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        var commandProtocol = this.commandProtocol;\n        commandProtocol.writeUInt8(Instruction.RUN_COMMAND);\n        command.submit.apply(command, __spreadArray([this, commandProtocol], __read(args)));\n    };\n    Instructor.prototype.finish = function () {\n        var e_2, _a;\n        this.commandProtocol.writeUInt8(Instruction.STOP);\n        var commandData = this.commandProtocol.flush();\n        var protocol = this.protocol;\n        protocol.writeUInt8(Instruction.ADVANCE);\n        protocol.advance();\n        try {\n            for (var commandData_1 = __values(commandData), commandData_1_1 = commandData_1.next(); !commandData_1_1.done; commandData_1_1 = commandData_1.next()) {\n                var data = commandData_1_1.value;\n                protocol.passData(data);\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (commandData_1_1 && !commandData_1_1.done && (_a = commandData_1.return)) _a.call(commandData_1);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    };\n    Instructor.prototype.loadResource = function (resource) {\n        var protocol = this.protocol;\n        this.resources.add(resource);\n        if (resource.state === _resource__WEBPACK_IMPORTED_MODULE_0__.ResourceState.LOAD_ABORTED) {\n            resource.state = _resource__WEBPACK_IMPORTED_MODULE_0__.ResourceState.LOADING;\n            return;\n        }\n        if (resource.state === _resource__WEBPACK_IMPORTED_MODULE_0__.ResourceState.UNLOADED) {\n            resource.state = _resource__WEBPACK_IMPORTED_MODULE_0__.ResourceState.LOADING;\n            var result = resource.load();\n            if (result) {\n                result.then(function () {\n                    if (resource.state === _resource__WEBPACK_IMPORTED_MODULE_0__.ResourceState.LOAD_ABORTED) {\n                        resource.onUnload();\n                        resource.state = _resource__WEBPACK_IMPORTED_MODULE_0__.ResourceState.UNLOADED;\n                    }\n                    else {\n                        resource.state = _resource__WEBPACK_IMPORTED_MODULE_0__.ResourceState.LOADED;\n                    }\n                });\n                return;\n            }\n            resource.state = _resource__WEBPACK_IMPORTED_MODULE_0__.ResourceState.LOADED;\n        }\n        if (resource.state === _resource__WEBPACK_IMPORTED_MODULE_0__.ResourceState.LOADED) {\n            protocol.writeUInt8(Instruction.LOAD_RESOURCE);\n            protocol.writeUInt32(resource.id);\n            protocol.writeString(resource.type.name);\n            resource.writeData(protocol);\n            resource.state = _resource__WEBPACK_IMPORTED_MODULE_0__.ResourceState.READY;\n        }\n        if (resource.state === _resource__WEBPACK_IMPORTED_MODULE_0__.ResourceState.READY && resource.needsUpdate) {\n            resource.needsUpdate = false;\n            protocol.writeUInt8(Instruction.UPDATE_RESOURCE);\n            protocol.writeUInt32(resource.id);\n            resource.writeUpdate(protocol);\n        }\n    };\n    Instructor.prototype.unloadResource = function (resource) {\n        var protocol = this.protocol;\n        if (resource.refcount > 0 || resource.state === _resource__WEBPACK_IMPORTED_MODULE_0__.ResourceState.UNLOADED) {\n            return;\n        }\n        if (resource.state === _resource__WEBPACK_IMPORTED_MODULE_0__.ResourceState.READY) {\n            protocol.writeUInt8(Instruction.UNLOAD_RESOURCE);\n            protocol.writeUInt32(resource.id);\n        }\n        if (resource.state !== _resource__WEBPACK_IMPORTED_MODULE_0__.ResourceState.LOADING) {\n            resource.onUnload();\n        }\n        resource.state = _resource__WEBPACK_IMPORTED_MODULE_0__.ResourceState.UNLOADED;\n    };\n    return Instructor;\n}());\n\n\n\n//# sourceURL=webpack://RenderCrank/./lib/core/instructor.ts?");

/***/ }),

/***/ "./lib/core/protocol.ts":
/*!******************************!*\
  !*** ./lib/core/protocol.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ProtocolWriter\": () => (/* binding */ ProtocolWriter),\n/* harmony export */   \"ProtocolReader\": () => (/* binding */ ProtocolReader),\n/* harmony export */   \"ArrayBufferProtocolWriter\": () => (/* binding */ ArrayBufferProtocolWriter),\n/* harmony export */   \"ArrayBufferProtocolReader\": () => (/* binding */ ArrayBufferProtocolReader)\n/* harmony export */ });\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __read = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (undefined && undefined.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nvar DEFAULT_BUFFER_SIZE = 1024;\nvar MAX_INLINE_STRING_LENGTH = 128;\nvar IS_LITTLE_ENDIAN = ((new Uint32Array((new Uint8Array([1, 2, 3, 4])).buffer))[0] === 0x04030201);\nvar ProtocolWriter = /** @class */ (function () {\n    function ProtocolWriter(shared) {\n        if (shared === void 0) { shared = false; }\n        this.shared = shared;\n        this.textEncoder = new TextEncoder();\n    }\n    ProtocolWriter.prototype.writeString = function (str) {\n        var encoded = this.textEncoder.encode(str);\n        this.writeUInt32(encoded.length);\n        if (encoded.length > MAX_INLINE_STRING_LENGTH) {\n            this.passData(encoded.buffer);\n        }\n        else {\n            this.writeUInt8Array(encoded);\n        }\n    };\n    ProtocolWriter.prototype.writeFloat32 = function (num) {\n        var offset = this.allocate(4, 4);\n        this.writeView.setFloat32(offset, num, IS_LITTLE_ENDIAN);\n    };\n    ProtocolWriter.prototype.writeFloat64 = function (num) {\n        var offset = this.allocate(8, 8);\n        this.writeView.setFloat64(offset, num, IS_LITTLE_ENDIAN);\n    };\n    ProtocolWriter.prototype.writeInt8 = function (num) {\n        var offset = this.allocate(1, 1);\n        this.writeView.setInt8(offset, num);\n    };\n    ProtocolWriter.prototype.writeInt16 = function (num) {\n        var offset = this.allocate(2, 2);\n        this.writeView.setInt16(offset, num, IS_LITTLE_ENDIAN);\n    };\n    ProtocolWriter.prototype.writeInt32 = function (num) {\n        var offset = this.allocate(4, 4);\n        this.writeView.setInt32(offset, num, IS_LITTLE_ENDIAN);\n    };\n    ProtocolWriter.prototype.writeUInt8 = function (num) {\n        var offset = this.allocate(1, 1);\n        this.writeView.setUint8(offset, num);\n    };\n    ProtocolWriter.prototype.writeUInt16 = function (num) {\n        var offset = this.allocate(2, 2);\n        this.writeView.setUint16(offset, num, IS_LITTLE_ENDIAN);\n    };\n    ProtocolWriter.prototype.writeUInt32 = function (num) {\n        var offset = this.allocate(4, 4);\n        this.writeView.setUint32(offset, num, IS_LITTLE_ENDIAN);\n    };\n    ProtocolWriter.prototype.writeFloat32Array = function (arr) {\n        var offset = this.allocate(arr.length * 4, 4);\n        for (var i = 0, size = arr.length; i < size; i++) {\n            this.writeView.setFloat32(offset + i * 4, arr[i], IS_LITTLE_ENDIAN);\n        }\n    };\n    ProtocolWriter.prototype.writeFloat64Array = function (arr) {\n        var offset = this.allocate(arr.length * 8, 8);\n        for (var i = 0, size = arr.length; i < size; i++) {\n            this.writeView.setFloat64(offset + i * 8, arr[i], IS_LITTLE_ENDIAN);\n        }\n    };\n    ProtocolWriter.prototype.writeInt8Array = function (arr) {\n        var offset = this.allocate(arr.length, 1);\n        for (var i = 0, size = arr.length; i < size; i++) {\n            this.writeView.setInt8(offset + i, arr[i]);\n        }\n    };\n    ProtocolWriter.prototype.writeInt16Array = function (arr) {\n        var offset = this.allocate(arr.length * 2, 2);\n        for (var i = 0, size = arr.length; i < size; i++) {\n            this.writeView.setInt16(offset + i * 2, arr[i], IS_LITTLE_ENDIAN);\n        }\n    };\n    ProtocolWriter.prototype.writeInt32Array = function (arr) {\n        var offset = this.allocate(arr.length * 4, 4);\n        for (var i = 0, size = arr.length; i < size; i++) {\n            this.writeView.setInt32(offset + i * 4, arr[i], IS_LITTLE_ENDIAN);\n        }\n    };\n    ProtocolWriter.prototype.writeUInt8Array = function (arr) {\n        var offset = this.allocate(arr.length, 1);\n        for (var i = 0, size = arr.length; i < size; i++) {\n            this.writeView.setUint8(offset + i, arr[i]);\n        }\n    };\n    ProtocolWriter.prototype.writeUInt16Array = function (arr) {\n        var offset = this.allocate(arr.length * 2, 2);\n        for (var i = 0, size = arr.length; i < size; i++) {\n            this.writeView.setUint16(offset + i * 2, arr[i], IS_LITTLE_ENDIAN);\n        }\n    };\n    ProtocolWriter.prototype.writeUInt32Array = function (arr) {\n        var offset = this.allocate(arr.length * 4, 4);\n        for (var i = 0, size = arr.length; i < size; i++) {\n            this.writeView.setUint32(offset + i * 4, arr[i], IS_LITTLE_ENDIAN);\n        }\n    };\n    return ProtocolWriter;\n}());\n\nvar ProtocolReader = /** @class */ (function () {\n    function ProtocolReader(shared) {\n        if (shared === void 0) { shared = false; }\n        this.shared = shared;\n        this.textDecoder = new TextDecoder('utf8');\n    }\n    ProtocolReader.prototype.readString = function () {\n        var length = this.readUInt32();\n        var data;\n        if (length > MAX_INLINE_STRING_LENGTH) {\n            data = this.getData();\n        }\n        else {\n            data = this.readUInt8Array(length);\n        }\n        return this.textDecoder.decode(data);\n    };\n    ProtocolReader.prototype.readFloat32 = function () {\n        var offset = this.prepareRead(4, 4);\n        return this.readView.getFloat32(offset, IS_LITTLE_ENDIAN);\n    };\n    ProtocolReader.prototype.readFloat64 = function () {\n        var offset = this.prepareRead(8, 8);\n        return this.readView.getFloat64(offset, IS_LITTLE_ENDIAN);\n    };\n    ProtocolReader.prototype.readInt8 = function () {\n        var offset = this.prepareRead(1, 1);\n        return this.readView.getInt8(offset);\n    };\n    ProtocolReader.prototype.readInt16 = function () {\n        var offset = this.prepareRead(2, 2);\n        return this.readView.getInt16(offset, IS_LITTLE_ENDIAN);\n    };\n    ProtocolReader.prototype.readInt32 = function () {\n        var offset = this.prepareRead(4, 4);\n        return this.readView.getInt32(offset, IS_LITTLE_ENDIAN);\n    };\n    ProtocolReader.prototype.readUInt8 = function () {\n        var offset = this.prepareRead(1, 1);\n        return this.readView.getUint8(offset);\n    };\n    ProtocolReader.prototype.readUInt16 = function () {\n        var offset = this.prepareRead(2, 2);\n        return this.readView.getUint16(offset, IS_LITTLE_ENDIAN);\n    };\n    ProtocolReader.prototype.readUInt32 = function () {\n        var offset = this.prepareRead(4, 4);\n        return this.readView.getUint32(offset, IS_LITTLE_ENDIAN);\n    };\n    ProtocolReader.prototype.readFloat32Array = function (amount) {\n        var offset = this.prepareRead(amount * 4, 4);\n        return new Float32Array(this.readBuffer, offset, amount);\n    };\n    ProtocolReader.prototype.readFloat64Array = function (amount) {\n        var offset = this.prepareRead(amount * 8, 8);\n        return new Float64Array(this.readBuffer, offset, amount);\n    };\n    ProtocolReader.prototype.readInt8Array = function (amount) {\n        var offset = this.prepareRead(amount, 1);\n        return new Int8Array(this.readBuffer, offset, amount);\n    };\n    ProtocolReader.prototype.readInt16Array = function (amount) {\n        var offset = this.prepareRead(amount * 2, 2);\n        return new Int16Array(this.readBuffer, offset, amount);\n    };\n    ProtocolReader.prototype.readInt32Array = function (amount) {\n        var offset = this.prepareRead(amount * 4, 4);\n        return new Int32Array(this.readBuffer, offset, amount);\n    };\n    ProtocolReader.prototype.readUInt8Array = function (amount) {\n        var offset = this.prepareRead(amount, 1);\n        return new Uint8Array(this.readBuffer, offset, amount);\n    };\n    ProtocolReader.prototype.readUInt16Array = function (amount) {\n        var offset = this.prepareRead(amount * 2, 2);\n        return new Uint16Array(this.readBuffer, offset, amount);\n    };\n    ProtocolReader.prototype.readUInt32Array = function (amount) {\n        var offset = this.prepareRead(amount * 4, 4);\n        return new Uint32Array(this.readBuffer, offset, amount);\n    };\n    return ProtocolReader;\n}());\n\nvar ProtocolBufferAllocator = /** @class */ (function () {\n    function ProtocolBufferAllocator() {\n        this.buffers = [];\n        this.bufferIndex = -1;\n    }\n    ProtocolBufferAllocator.prototype.allocate = function (amount) {\n        this.bufferIndex++;\n        if (this.bufferIndex === this.buffers.length) {\n            var buffer_1 = new ArrayBuffer(Math.max(amount, DEFAULT_BUFFER_SIZE));\n            this.buffers.push(buffer_1);\n            return buffer_1;\n        }\n        var buffer = this.buffers[this.bufferIndex];\n        if (buffer.byteLength < amount) {\n            this.buffers.push(buffer);\n            buffer = new ArrayBuffer(amount);\n            this.buffers[this.bufferIndex] = buffer;\n        }\n        return buffer;\n    };\n    ProtocolBufferAllocator.prototype.return = function (arr) {\n        var _a;\n        (_a = this.buffers).push.apply(_a, __spreadArray([], __read(arr)));\n    };\n    ProtocolBufferAllocator.prototype.reset = function () {\n        this.buffers = [];\n        this.bufferIndex = 0;\n    };\n    return ProtocolBufferAllocator;\n}());\nvar ArrayBufferProtocolWriter = /** @class */ (function (_super) {\n    __extends(ArrayBufferProtocolWriter, _super);\n    function ArrayBufferProtocolWriter(shared, allocator) {\n        if (shared === void 0) { shared = false; }\n        if (allocator === void 0) { allocator = new ProtocolBufferAllocator(); }\n        var _this = _super.call(this, shared) || this;\n        _this.allocator = allocator;\n        _this.writeBuffers = [];\n        _this.writeOffset = 0;\n        return _this;\n    }\n    ArrayBufferProtocolWriter.prototype.advance = function () {\n        this.writeBuffer = null;\n        this.writeView = null;\n        this.writeOffset = 0;\n    };\n    ArrayBufferProtocolWriter.prototype.passData = function (data) {\n        this.writeBuffers.push(data);\n    };\n    ArrayBufferProtocolWriter.prototype.createWriter = function () {\n        return new ArrayBufferProtocolWriter(this.shared, this.allocator);\n    };\n    ArrayBufferProtocolWriter.prototype.allocate = function (amount, align) {\n        if (!this.writeBuffer) {\n            this.writeBuffer = this.allocator.allocate(amount);\n            this.writeView = new DataView(this.writeBuffer);\n            this.writeBuffers.push(this.writeBuffer);\n            this.writeOffset = amount;\n            return 0;\n        }\n        var offset = this.writeOffset;\n        if (align > 1) {\n            offset += align - offset % align;\n        }\n        var newOffset = offset + amount;\n        if (newOffset > this.writeBuffer.byteLength) {\n            this.advance();\n            return this.allocate(amount, align);\n        }\n        this.writeOffset = newOffset;\n        return offset;\n    };\n    ArrayBufferProtocolWriter.prototype.flush = function () {\n        var oldBuffers = this.writeBuffers;\n        this.writeBuffer = null;\n        this.writeView = null;\n        this.writeOffset = 0;\n        this.writeBuffers = [];\n        return oldBuffers;\n    };\n    return ArrayBufferProtocolWriter;\n}(ProtocolWriter));\n\nvar ArrayBufferProtocolReader = /** @class */ (function (_super) {\n    __extends(ArrayBufferProtocolReader, _super);\n    function ArrayBufferProtocolReader() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.readBuffers = [];\n        _this.readBufferIndex = 0;\n        _this.readOffset = 0;\n        return _this;\n    }\n    ArrayBufferProtocolReader.prototype.getData = function () {\n        return this.readBuffers[++this.readBufferIndex];\n    };\n    ArrayBufferProtocolReader.prototype.advance = function () {\n        this.readBuffer = this.readBuffers[++this.readBufferIndex];\n        this.readView = new DataView(this.readBuffer);\n        this.readOffset = 0;\n    };\n    ArrayBufferProtocolReader.prototype.prepareRead = function (amount, align) {\n        var offset = this.readOffset;\n        if (align > 1) {\n            offset += align - offset % align;\n        }\n        var newOffset = offset + amount;\n        if (newOffset > this.readBuffer.byteLength) {\n            this.advance();\n            return this.prepareRead(amount, align);\n        }\n        this.readOffset = newOffset;\n        return offset;\n    };\n    ArrayBufferProtocolReader.prototype.receive = function (buffers) {\n        var oldBuffers = this.readBuffers;\n        this.readBuffers = buffers;\n        this.readBufferIndex = 0;\n        this.readBuffer = buffers[0];\n        this.readView = this.readBuffer ? new DataView(this.readBuffer) : null;\n        this.readOffset = 0;\n        return oldBuffers;\n    };\n    return ArrayBufferProtocolReader;\n}(ProtocolReader));\n\n\n\n//# sourceURL=webpack://RenderCrank/./lib/core/protocol.ts?");

/***/ }),

/***/ "./lib/core/renderer.ts":
/*!******************************!*\
  !*** ./lib/core/renderer.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CanvasRenderer\": () => (/* binding */ CanvasRenderer)\n/* harmony export */ });\n/* harmony import */ var _command__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./command */ \"./lib/core/command.ts\");\n/* harmony import */ var _resource__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./resource */ \"./lib/core/resource.ts\");\n/* harmony import */ var _instructor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./instructor */ \"./lib/core/instructor.ts\");\n\n\n\nvar DEBUG = true;\nvar CanvasRenderer = /** @class */ (function () {\n    function CanvasRenderer(canvas) {\n        this.canvas = canvas;\n        this.resources = new Map();\n        this.gl = canvas.getContext('webgl2');\n    }\n    CanvasRenderer.prototype.getResource = function (id, type) {\n        var resource = this.resources.get(id);\n        if (!resource) {\n            return null;\n        }\n        if (DEBUG) {\n            if (!(resource instanceof type)) {\n                throw new Error(\"Resource has incorrect type!\");\n            }\n        }\n        return resource;\n    };\n    CanvasRenderer.prototype.render = function (protocol) {\n        var resources = this.resources;\n        var commandMap = Array(256);\n        var action;\n        while ((action = protocol.readUInt8()) !== _instructor__WEBPACK_IMPORTED_MODULE_2__.Instruction.STOP) {\n            if (action === _instructor__WEBPACK_IMPORTED_MODULE_2__.Instruction.RUN_COMMAND) {\n                var id = protocol.readUInt8();\n                commandMap[id].render(protocol, this);\n                continue;\n            }\n            if (action === _instructor__WEBPACK_IMPORTED_MODULE_2__.Instruction.MAP_COMMAND) {\n                var id = protocol.readUInt8();\n                var commandName = protocol.readString();\n                var command = _command__WEBPACK_IMPORTED_MODULE_0__.COMMAND_MAP[commandName];\n                if (!command) {\n                    throw new Error(\"Command \" + commandName + \" not registered\");\n                }\n                commandMap[id] = command;\n                continue;\n            }\n            if (action === _instructor__WEBPACK_IMPORTED_MODULE_2__.Instruction.UPDATE_RESOURCE) {\n                var id = protocol.readUInt32();\n                var resource = this.resources.get(id);\n                resource.update(protocol);\n                continue;\n            }\n            if (action === _instructor__WEBPACK_IMPORTED_MODULE_2__.Instruction.LOAD_RESOURCE) {\n                var id = protocol.readUInt32();\n                var name_1 = protocol.readString();\n                var resource = new _resource__WEBPACK_IMPORTED_MODULE_1__.RESOURCE_MAP[name_1](this);\n                resources.set(id, resource);\n                resource.load(protocol);\n                continue;\n            }\n            if (action === _instructor__WEBPACK_IMPORTED_MODULE_2__.Instruction.UNLOAD_RESOURCE) {\n                var id = protocol.readUInt32();\n                var resource = this.resources.get(id);\n                resource.unload();\n                this.resources.delete(id);\n                continue;\n            }\n            if (action === _instructor__WEBPACK_IMPORTED_MODULE_2__.Instruction.ADVANCE) {\n                protocol.advance();\n                continue;\n            }\n        }\n    };\n    return CanvasRenderer;\n}());\n\n\n\n//# sourceURL=webpack://RenderCrank/./lib/core/renderer.ts?");

/***/ }),

/***/ "./lib/core/resource.ts":
/*!******************************!*\
  !*** ./lib/core/resource.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RESOURCE_MAP\": () => (/* binding */ RESOURCE_MAP),\n/* harmony export */   \"registerResourceType\": () => (/* binding */ registerResourceType),\n/* harmony export */   \"ResourceState\": () => (/* binding */ ResourceState),\n/* harmony export */   \"ResourceID\": () => (/* binding */ ResourceID),\n/* harmony export */   \"ResourceRef\": () => (/* binding */ ResourceRef),\n/* harmony export */   \"Resource\": () => (/* binding */ Resource)\n/* harmony export */ });\nvar RESOURCE_MAP = {};\nfunction registerResourceType(resource) {\n    if (Object.prototype.hasOwnProperty.call(RESOURCE_MAP, resource.name)) {\n        throw new Error(\"A resource type with the name \" + resource.name + \" is already registered.\");\n    }\n    RESOURCE_MAP[resource.name] = resource;\n}\nvar ResourceState;\n(function (ResourceState) {\n    ResourceState[ResourceState[\"UNLOADED\"] = 0] = \"UNLOADED\";\n    ResourceState[ResourceState[\"LOADING\"] = 1] = \"LOADING\";\n    ResourceState[ResourceState[\"LOAD_ABORTED\"] = 2] = \"LOAD_ABORTED\";\n    ResourceState[ResourceState[\"LOADED\"] = 3] = \"LOADED\";\n    ResourceState[ResourceState[\"READY\"] = 4] = \"READY\";\n})(ResourceState || (ResourceState = {}));\nvar RESOURCE_ID_COUNTER = 0;\nvar ResourceID;\n(function (ResourceID) {\n    function nextID() {\n        return RESOURCE_ID_COUNTER++;\n    }\n    ResourceID.nextID = nextID;\n})(ResourceID || (ResourceID = {}));\nvar ResourceRef = /** @class */ (function () {\n    function ResourceRef(type) {\n        this.type = type;\n        this.id = ResourceID.nextID();\n        this.state = ResourceState.UNLOADED;\n        this.refcount = 0;\n        this.needsUpdate = false;\n    }\n    ResourceRef.prototype.load = function () {\n        // overwrite\n    };\n    ResourceRef.prototype.writeData = function (protocol) {\n        // overwrite\n    };\n    ResourceRef.prototype.writeUpdate = function (protocol) {\n        // overwrite\n    };\n    ResourceRef.prototype.onUnload = function () {\n        // overwrite\n        this.needsUpdate = false;\n    };\n    return ResourceRef;\n}());\n\nvar Resource = /** @class */ (function () {\n    function Resource(renderer) {\n        this.renderer = renderer;\n    }\n    return Resource;\n}());\n\n\n\n//# sourceURL=webpack://RenderCrank/./lib/core/resource.ts?");

/***/ }),

/***/ "./lib/index.ts":
/*!**********************!*\
  !*** ./lib/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ArrayBufferProtocolReader\": () => (/* reexport safe */ _core__WEBPACK_IMPORTED_MODULE_0__.ArrayBufferProtocolReader),\n/* harmony export */   \"ArrayBufferProtocolWriter\": () => (/* reexport safe */ _core__WEBPACK_IMPORTED_MODULE_0__.ArrayBufferProtocolWriter),\n/* harmony export */   \"COMMAND_MAP\": () => (/* reexport safe */ _core__WEBPACK_IMPORTED_MODULE_0__.COMMAND_MAP),\n/* harmony export */   \"CanvasRenderer\": () => (/* reexport safe */ _core__WEBPACK_IMPORTED_MODULE_0__.CanvasRenderer),\n/* harmony export */   \"Command\": () => (/* reexport safe */ _core__WEBPACK_IMPORTED_MODULE_0__.Command),\n/* harmony export */   \"Instruction\": () => (/* reexport safe */ _core__WEBPACK_IMPORTED_MODULE_0__.Instruction),\n/* harmony export */   \"Instructor\": () => (/* reexport safe */ _core__WEBPACK_IMPORTED_MODULE_0__.Instructor),\n/* harmony export */   \"ProtocolReader\": () => (/* reexport safe */ _core__WEBPACK_IMPORTED_MODULE_0__.ProtocolReader),\n/* harmony export */   \"ProtocolWriter\": () => (/* reexport safe */ _core__WEBPACK_IMPORTED_MODULE_0__.ProtocolWriter),\n/* harmony export */   \"RESOURCE_MAP\": () => (/* reexport safe */ _core__WEBPACK_IMPORTED_MODULE_0__.RESOURCE_MAP),\n/* harmony export */   \"Resource\": () => (/* reexport safe */ _core__WEBPACK_IMPORTED_MODULE_0__.Resource),\n/* harmony export */   \"ResourceID\": () => (/* reexport safe */ _core__WEBPACK_IMPORTED_MODULE_0__.ResourceID),\n/* harmony export */   \"ResourceRef\": () => (/* reexport safe */ _core__WEBPACK_IMPORTED_MODULE_0__.ResourceRef),\n/* harmony export */   \"ResourceState\": () => (/* reexport safe */ _core__WEBPACK_IMPORTED_MODULE_0__.ResourceState),\n/* harmony export */   \"registerResourceType\": () => (/* reexport safe */ _core__WEBPACK_IMPORTED_MODULE_0__.registerResourceType),\n/* harmony export */   \"Buffer\": () => (/* reexport safe */ _resources__WEBPACK_IMPORTED_MODULE_1__.Buffer),\n/* harmony export */   \"BufferRef\": () => (/* reexport safe */ _resources__WEBPACK_IMPORTED_MODULE_1__.BufferRef),\n/* harmony export */   \"Program\": () => (/* reexport safe */ _resources__WEBPACK_IMPORTED_MODULE_1__.Program),\n/* harmony export */   \"ProgramRef\": () => (/* reexport safe */ _resources__WEBPACK_IMPORTED_MODULE_1__.ProgramRef),\n/* harmony export */   \"RunProgram\": () => (/* reexport safe */ _commands__WEBPACK_IMPORTED_MODULE_2__.RunProgram),\n/* harmony export */   \"DrawCallBatcher\": () => (/* reexport safe */ _render_target__WEBPACK_IMPORTED_MODULE_3__.DrawCallBatcher),\n/* harmony export */   \"RenderTarget\": () => (/* reexport safe */ _render_target__WEBPACK_IMPORTED_MODULE_3__.RenderTarget),\n/* harmony export */   \"RenderContext\": () => (/* reexport safe */ _render_context__WEBPACK_IMPORTED_MODULE_4__.RenderContext),\n/* harmony export */   \"RenderContextID\": () => (/* reexport safe */ _render_context__WEBPACK_IMPORTED_MODULE_4__.RenderContextID),\n/* harmony export */   \"Component\": () => (/* reexport safe */ _component__WEBPACK_IMPORTED_MODULE_5__.Component),\n/* harmony export */   \"SingleThreadedCanvasRenderer\": () => (/* reexport safe */ _single_threaded_renderer__WEBPACK_IMPORTED_MODULE_6__.SingleThreadedCanvasRenderer)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./core */ \"./lib/core/index.ts\");\n/* harmony import */ var _resources__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./resources */ \"./lib/resources/index.ts\");\n/* harmony import */ var _commands__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./commands */ \"./lib/commands/index.ts\");\n/* harmony import */ var _render_target__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./render-target */ \"./lib/render-target.ts\");\n/* harmony import */ var _render_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./render-context */ \"./lib/render-context.ts\");\n/* harmony import */ var _component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./component */ \"./lib/component.ts\");\n/* harmony import */ var _single_threaded_renderer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./single-threaded-renderer */ \"./lib/single-threaded-renderer.ts\");\n\n\n\n\n\n\n\n\n\n(0,_core__WEBPACK_IMPORTED_MODULE_0__.registerResourceType)(_resources__WEBPACK_IMPORTED_MODULE_1__.Program);\n(0,_core__WEBPACK_IMPORTED_MODULE_0__.registerResourceType)(_resources__WEBPACK_IMPORTED_MODULE_1__.Buffer);\n\n\n//# sourceURL=webpack://RenderCrank/./lib/index.ts?");

/***/ }),

/***/ "./lib/programs/colored-triangles.ts":
/*!*******************************************!*\
  !*** ./lib/programs/colored-triangles.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ColoredTrianglesProgram\": () => (/* binding */ ColoredTrianglesProgram)\n/* harmony export */ });\n/* harmony import */ var _resources__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../resources */ \"./lib/resources/index.ts\");\n\nvar ColoredTrianglesProgram = new _resources__WEBPACK_IMPORTED_MODULE_0__.ProgramRef({\n    attributes: {\n        color: 'vec4',\n        position: 'vec4',\n    },\n    vertexShader: \"\\n        out vec4 vColor;\\n\\n        void main() {\\n            vColor = color;\\n            gl_Position = position;\\n        }\\n    \",\n    fragmentShader: \"\\n        in vec4 vColor;\\n         \\n        out vec4 outColor;\\n         \\n        void main() {\\n          outColor = vColor;\\n        }\\n    \",\n});\n\n\n//# sourceURL=webpack://RenderCrank/./lib/programs/colored-triangles.ts?");

/***/ }),

/***/ "./lib/programs/index.ts":
/*!*******************************!*\
  !*** ./lib/programs/index.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ColoredTrianglesProgram\": () => (/* reexport safe */ _colored_triangles__WEBPACK_IMPORTED_MODULE_0__.ColoredTrianglesProgram)\n/* harmony export */ });\n/* harmony import */ var _colored_triangles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./colored-triangles */ \"./lib/programs/colored-triangles.ts\");\n\n\n\n//# sourceURL=webpack://RenderCrank/./lib/programs/index.ts?");

/***/ }),

/***/ "./lib/render-context.ts":
/*!*******************************!*\
  !*** ./lib/render-context.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RenderContextID\": () => (/* binding */ RenderContextID),\n/* harmony export */   \"RenderContext\": () => (/* binding */ RenderContext)\n/* harmony export */ });\n/* harmony import */ var _resources__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./resources */ \"./lib/resources/index.ts\");\n\nvar CONTEXT_ID_COUNTER = 0;\nvar RenderContextID;\n(function (RenderContextID) {\n    function nextID() {\n        return CONTEXT_ID_COUNTER++;\n    }\n    RenderContextID.nextID = nextID;\n})(RenderContextID || (RenderContextID = {}));\nvar RenderContext = /** @class */ (function () {\n    function RenderContext() {\n        this.id = RenderContextID.nextID();\n        this.bufferPool = new BufferPool(this);\n        this.float32BufferPool = new BufferPoolView(this.bufferPool, Float32Array);\n    }\n    return RenderContext;\n}());\n\nvar BUFFER_SIZE = 1024;\nvar BufferPoolView = /** @class */ (function () {\n    function BufferPoolView(pool, type) {\n        this.pool = pool;\n        this.type = type;\n    }\n    BufferPoolView.prototype.writeMultiData = function (multi, totalLength) {\n        var ELEMENT_SIZE = this.type.BYTES_PER_ELEMENT;\n        var byteLength = totalLength * ELEMENT_SIZE;\n        var byteOffset = this.pool.allocateSpace(byteLength);\n        var buffer = this.pool.currentBuffer;\n        if (this.currentBuffer !== buffer) {\n            this.currentBuffer = buffer;\n            this.currentView = new this.type(buffer.buffer);\n        }\n        var writeOffset = byteOffset;\n        for (var i = 0; i < multi.length; i++) {\n            var data = multi[i];\n            this.currentView.set(data, writeOffset);\n            writeOffset += data.length * ELEMENT_SIZE;\n        }\n        return {\n            buffer: buffer,\n            byteOffset: byteOffset,\n            byteLength: byteLength\n        };\n    };\n    BufferPoolView.prototype.writeData = function (data) {\n        var ELEMENT_SIZE = this.type.BYTES_PER_ELEMENT;\n        var byteLength = data.length * ELEMENT_SIZE;\n        var byteOffset = this.pool.allocateSpace(byteLength);\n        var buffer = this.pool.currentBuffer;\n        if (this.currentBuffer !== buffer) {\n            this.currentBuffer = buffer;\n            this.currentView = new this.type(buffer.buffer);\n        }\n        this.currentView.set(data, byteOffset);\n        return {\n            buffer: buffer,\n            byteOffset: byteOffset,\n            byteLength: byteLength\n        };\n    };\n    return BufferPoolView;\n}());\nvar BufferPool = /** @class */ (function () {\n    function BufferPool(context) {\n        this.context = context;\n        this.buffers = [];\n        this.buffersIndex = 0;\n        this.currentBufferOffset = 0;\n    }\n    BufferPool.prototype.reset = function () {\n        this.buffersIndex = 0;\n        this.currentBufferOffset = 0;\n    };\n    BufferPool.prototype.allocateSpace = function (amount) {\n        if (this.buffersIndex >= this.buffers.length) {\n            this.currentBuffer = new _resources__WEBPACK_IMPORTED_MODULE_0__.BufferRef(new ArrayBuffer(Math.max(BUFFER_SIZE, amount)));\n            this.buffers.push(this.currentBuffer);\n        }\n        var nextOffset = this.currentBufferOffset + amount;\n        if (nextOffset > this.currentBuffer.size) {\n            if (this.currentBufferOffset === 0) {\n                // We didn't use this buffer. Replace it with one that fits.\n                this.currentBuffer = new _resources__WEBPACK_IMPORTED_MODULE_0__.BufferRef(new ArrayBuffer(Math.max(BUFFER_SIZE, amount)));\n                this.buffers[this.buffersIndex] = this.currentBuffer;\n            }\n            else {\n                this.buffersIndex++;\n                this.currentBufferOffset = 0;\n                this.currentBuffer = this.buffers[this.buffersIndex];\n                return this.allocateSpace(amount);\n            }\n        }\n        var old = this.currentBufferOffset;\n        this.currentBufferOffset = nextOffset;\n        return old;\n    };\n    return BufferPool;\n}());\n\n\n//# sourceURL=webpack://RenderCrank/./lib/render-context.ts?");

/***/ }),

/***/ "./lib/render-target.ts":
/*!******************************!*\
  !*** ./lib/render-target.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RenderTarget\": () => (/* binding */ RenderTarget),\n/* harmony export */   \"DrawCallBatcher\": () => (/* binding */ DrawCallBatcher)\n/* harmony export */ });\n/* harmony import */ var _commands__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./commands */ \"./lib/commands/index.ts\");\n/* harmony import */ var _programs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./programs */ \"./lib/programs/index.ts\");\nvar __values = (undefined && undefined.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\n\nvar RenderTarget = /** @class */ (function () {\n    function RenderTarget(context) {\n        this.context = context;\n        this.zIndex = 0;\n        this.drawCallBatcher = new DrawCallBatcher();\n    }\n    RenderTarget.prototype.submit = function (instructor) {\n        this.drawCallBatcher.submit(instructor);\n    };\n    RenderTarget.prototype.rect = function (x, y, width, height) {\n        var z = this.zIndex++;\n        this.triangles([\n            x, y, z,\n            x + width, y, z,\n            x + width, y + height, z,\n            x, y, z,\n            x + width, y + height, z,\n            x, y + height, z,\n        ]);\n    };\n    RenderTarget.prototype.triangles = function (data) {\n        this.drawCallBatcher.drawTriangles(this.context, _programs__WEBPACK_IMPORTED_MODULE_1__.ColoredTrianglesProgram, data);\n    };\n    return RenderTarget;\n}());\n\nvar DrawCallBatcher = /** @class */ (function () {\n    function DrawCallBatcher() {\n        this.programs = {};\n        this.batchedPrograms = [];\n    }\n    DrawCallBatcher.prototype.drawTriangles = function (context, program, data) {\n        var ID = context.id + \":\" + program.id;\n        var batch = this.programs[ID];\n        if (!batch) {\n            this.programs[ID] = {\n                context: context,\n                program: program,\n                triangles: [data],\n                trianglesLength: data.length\n            };\n            return;\n        }\n        batch.triangles.push(data);\n        batch.trianglesLength += data.length;\n    };\n    DrawCallBatcher.prototype.submit = function (instructor) {\n        var e_1, _a;\n        try {\n            for (var _b = __values(Object.values(this.programs)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var _d = _c.value, context = _d.context, program = _d.program, triangles = _d.triangles, trianglesLength = _d.trianglesLength;\n                var _e = context.float32BufferPool.writeMultiData(triangles, trianglesLength), buffer = _e.buffer, byteOffset = _e.byteOffset;\n                instructor.command(_commands__WEBPACK_IMPORTED_MODULE_0__.RunProgram, {\n                    program: program,\n                    buffer: buffer,\n                    offset: byteOffset,\n                    length: trianglesLength\n                });\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    return DrawCallBatcher;\n}());\n\n\n\n//# sourceURL=webpack://RenderCrank/./lib/render-target.ts?");

/***/ }),

/***/ "./lib/resources/buffer.ts":
/*!*********************************!*\
  !*** ./lib/resources/buffer.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BufferRef\": () => (/* binding */ BufferRef),\n/* harmony export */   \"Buffer\": () => (/* binding */ Buffer)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./lib/core/index.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\nvar BufferRef = /** @class */ (function (_super) {\n    __extends(BufferRef, _super);\n    function BufferRef(buffer) {\n        var _this = _super.call(this, Buffer) || this;\n        _this.buffer = buffer;\n        _this.updates = [];\n        _this.isShared = false;\n        if (window.SharedArrayBuffer) {\n            _this.isShared = buffer instanceof SharedArrayBuffer;\n        }\n        _this.byteView = new Uint8Array(buffer);\n        _this.size = buffer.byteLength;\n        return _this;\n    }\n    BufferRef.prototype.notify = function (offset, length) {\n        this.updates.push({\n            offset: offset,\n            length: length\n        });\n        this.needsUpdate = true;\n    };\n    BufferRef.prototype.writeData = function (protocol) {\n        if (this.isShared || protocol.shared) {\n            protocol.writeUInt8(1);\n            protocol.passData(this.buffer);\n        }\n        else {\n            protocol.writeUInt8(0);\n            protocol.writeUInt32(this.buffer.byteLength);\n            protocol.writeUInt8Array(this.byteView);\n        }\n    };\n    BufferRef.prototype.writeUpdate = function (protocol) {\n        var updates = this.updates;\n        protocol.writeUInt32(updates.length);\n        for (var i = 0; i < updates.length; i++) {\n            var _a = updates[i], offset = _a.offset, length_1 = _a.length;\n            protocol.writeUInt32(offset);\n            protocol.writeUInt32(length_1);\n            if (this.isShared || protocol.shared) {\n                protocol.writeUInt8Array(this.byteView.subarray(offset, offset + length_1));\n            }\n        }\n        this.updates = [];\n    };\n    BufferRef.prototype.onUnload = function () {\n        this.needsUpdate = false;\n        this.updates = [];\n    };\n    return BufferRef;\n}(_core__WEBPACK_IMPORTED_MODULE_0__.ResourceRef));\n\nvar Buffer = /** @class */ (function (_super) {\n    __extends(Buffer, _super);\n    function Buffer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Buffer.prototype.load = function (protocol) {\n        var data;\n        var isShared = !!protocol.readUInt8();\n        if (isShared) {\n            this.sharedBuffer = data = new Uint8Array(protocol.getData());\n        }\n        else {\n            var length_2 = protocol.readUInt32();\n            data = protocol.readUInt8Array(length_2);\n        }\n        var gl = this.renderer.gl;\n        var buffer = this.buffer = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n        gl.bufferData(gl.ARRAY_BUFFER, data, gl.STATIC_DRAW);\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n    };\n    Buffer.prototype.update = function (protocol) {\n        var gl = this.renderer.gl;\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n        var updateNumber = protocol.readUInt32();\n        for (var i = 0; i < updateNumber; i++) {\n            var offset = protocol.readUInt32();\n            var length_3 = protocol.readUInt32();\n            if (this.sharedBuffer) {\n                gl.bufferSubData(gl.ARRAY_BUFFER, offset, protocol.readUInt8Array(length_3));\n            }\n            else {\n                gl.bufferSubData(gl.ARRAY_BUFFER, offset, this.sharedBuffer, offset, length_3);\n            }\n        }\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n    };\n    Buffer.prototype.unload = function () {\n        var gl = this.renderer.gl;\n        gl.deleteBuffer(this.buffer);\n        this.buffer = null;\n    };\n    return Buffer;\n}(_core__WEBPACK_IMPORTED_MODULE_0__.Resource));\n\n\n\n//# sourceURL=webpack://RenderCrank/./lib/resources/buffer.ts?");

/***/ }),

/***/ "./lib/resources/index.ts":
/*!********************************!*\
  !*** ./lib/resources/index.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Buffer\": () => (/* reexport safe */ _buffer__WEBPACK_IMPORTED_MODULE_0__.Buffer),\n/* harmony export */   \"BufferRef\": () => (/* reexport safe */ _buffer__WEBPACK_IMPORTED_MODULE_0__.BufferRef),\n/* harmony export */   \"Program\": () => (/* reexport safe */ _program__WEBPACK_IMPORTED_MODULE_1__.Program),\n/* harmony export */   \"ProgramRef\": () => (/* reexport safe */ _program__WEBPACK_IMPORTED_MODULE_1__.ProgramRef)\n/* harmony export */ });\n/* harmony import */ var _buffer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./buffer */ \"./lib/resources/buffer.ts\");\n/* harmony import */ var _program__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./program */ \"./lib/resources/program.ts\");\n\n\n\n\n//# sourceURL=webpack://RenderCrank/./lib/resources/index.ts?");

/***/ }),

/***/ "./lib/resources/program.ts":
/*!**********************************!*\
  !*** ./lib/resources/program.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ProgramRef\": () => (/* binding */ ProgramRef),\n/* harmony export */   \"Program\": () => (/* binding */ Program)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core */ \"./lib/core/index.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __read = (undefined && undefined.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __values = (undefined && undefined.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nvar PREAMBLE = \"#version 300 es\\nprecision highp float;\\n\";\nvar ProgramRef = /** @class */ (function (_super) {\n    __extends(ProgramRef, _super);\n    function ProgramRef(def) {\n        var _this = _super.call(this, Program) || this;\n        _this.def = def;\n        return _this;\n    }\n    ProgramRef.prototype.writeData = function (protocol) {\n        protocol.writeString(JSON.stringify(this.def));\n    };\n    return ProgramRef;\n}(_core__WEBPACK_IMPORTED_MODULE_0__.ResourceRef));\n\nvar Program = /** @class */ (function (_super) {\n    __extends(Program, _super);\n    function Program() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Program.prototype.load = function (protocol) {\n        var def = JSON.parse(protocol.readString());\n        var gl = this.renderer.gl;\n        var attributes = def.attributes || {};\n        var uniforms = def.uniforms || {};\n        var vertexShaderSource = createVertexShaderCode(def.vertexShader, attributes, uniforms);\n        var fragmentShaderSource = createFragmentShaderCode(def.fragmentShader, uniforms);\n        var vertexShader = this.vertexShader = gl.createShader(gl.VERTEX_SHADER);\n        gl.shaderSource(vertexShader, vertexShaderSource);\n        gl.compileShader(vertexShader);\n        if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\n            throw new Error(gl.getShaderInfoLog(vertexShader));\n        }\n        var fragmentShader = this.fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n        gl.shaderSource(fragmentShader, fragmentShaderSource);\n        gl.compileShader(fragmentShader);\n        if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n            throw new Error(gl.getShaderInfoLog(fragmentShader));\n        }\n        var program = this.program = gl.createProgram();\n        gl.attachShader(program, vertexShader);\n        gl.attachShader(program, fragmentShader);\n        gl.linkProgram(program);\n        if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n            throw new Error(gl.getProgramInfoLog(program));\n        }\n        this.attributes = Object.entries(attributes).map(function (_a) {\n            var _b = __read(_a, 2), name = _b[0], type = _b[1];\n            return {\n                name: name,\n                type: type,\n                location: gl.getAttribLocation(program, name)\n            };\n        });\n        this.uniforms = Object.entries(uniforms).map(function (_a) {\n            var _b = __read(_a, 2), name = _b[0], type = _b[1];\n            return {\n                name: name,\n                type: type,\n                location: gl.getUniformLocation(program, name)\n            };\n        });\n    };\n    Program.prototype.update = function () {\n        // noop\n    };\n    Program.prototype.unload = function () {\n        var gl = this.renderer.gl;\n        gl.deleteProgram(this.program);\n        gl.deleteShader(this.vertexShader);\n        gl.deleteShader(this.fragmentShader);\n        this.program = void 0;\n        this.vertexShader = void 0;\n        this.fragmentShader = void 0;\n    };\n    return Program;\n}(_core__WEBPACK_IMPORTED_MODULE_0__.Resource));\n\nfunction createVertexShaderCode(body, attributes, uniforms) {\n    return (PREAMBLE +\n        createAttributes(attributes) +\n        createUniforms(uniforms) +\n        fixIndent(body));\n}\nfunction createFragmentShaderCode(body, uniforms) {\n    return (PREAMBLE +\n        createUniforms(uniforms) +\n        fixIndent(body));\n}\nfunction createAttributes(attributes) {\n    return Object.entries(attributes)\n        .map(function (_) { return \"in \" + _[1] + \" \" + _[0] + \";\"; })\n        .join('\\n') + '\\n';\n}\nfunction createUniforms(uniforms) {\n    return Object.entries(uniforms)\n        .map(function (_) { return \"uniform \" + _[1] + \" \" + _[0] + \";\"; })\n        .join('\\n') + '\\n';\n}\nvar firstCharRegExp = /[^ \\t]/;\nfunction fixIndent(body) {\n    var e_1, _a;\n    var lines = body.split('\\n');\n    var minIndent = Infinity;\n    try {\n        for (var lines_1 = __values(lines), lines_1_1 = lines_1.next(); !lines_1_1.done; lines_1_1 = lines_1.next()) {\n            var line = lines_1_1.value;\n            var match = line.match(firstCharRegExp);\n            var lineStart = match ? match.index : line.length;\n            minIndent = Math.min(minIndent, lineStart);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (lines_1_1 && !lines_1_1.done && (_a = lines_1.return)) _a.call(lines_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return lines.map(function (line) {\n        return line.slice(minIndent);\n    }).join('\\n');\n}\n\n\n//# sourceURL=webpack://RenderCrank/./lib/resources/program.ts?");

/***/ }),

/***/ "./lib/single-threaded-renderer.ts":
/*!*****************************************!*\
  !*** ./lib/single-threaded-renderer.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SingleThreadedCanvasRenderer\": () => (/* binding */ SingleThreadedCanvasRenderer)\n/* harmony export */ });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./core */ \"./lib/core/index.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n/*\n * Utility class to easily setup single threaded rendering.\n */\nvar SingleThreadedCanvasRenderer = /** @class */ (function (_super) {\n    __extends(SingleThreadedCanvasRenderer, _super);\n    function SingleThreadedCanvasRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.protocolWriter = new _core__WEBPACK_IMPORTED_MODULE_0__.ArrayBufferProtocolWriter(true);\n        _this.protocolReader = new _core__WEBPACK_IMPORTED_MODULE_0__.ArrayBufferProtocolReader(true);\n        return _this;\n    }\n    SingleThreadedCanvasRenderer.prototype.renderComponent = function (component) {\n        component.render(this.protocolWriter);\n        var data = this.protocolWriter.flush();\n        this.protocolReader.receive(data);\n        this.render(this.protocolReader);\n    };\n    SingleThreadedCanvasRenderer.prototype.unloadComponent = function (component) {\n        component.unload(this.protocolWriter);\n        var data = this.protocolWriter.flush();\n        this.protocolReader.receive(data);\n        this.render(this.protocolReader);\n    };\n    return SingleThreadedCanvasRenderer;\n}(_core__WEBPACK_IMPORTED_MODULE_0__.CanvasRenderer));\n\n\n\n//# sourceURL=webpack://RenderCrank/./lib/single-threaded-renderer.ts?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./lib/index.ts");
/******/ 	
/******/ 	return __webpack_exports__;
/******/ })()
;
});